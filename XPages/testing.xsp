<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
	xmlns:xe="http://www.ibm.com/xsp/coreex">

	<xp:button value="Label" id="button1">
		<xp:eventHandler event="onclick" submit="true"
			refreshMode="complete">
			<xp:this.action><![CDATA[#{javascript:var obj = new bsuite.jsonparsing.ProfileEdit();}]]></xp:this.action>
		</xp:eventHandler>
	</xp:button>
	<xp:text escape="true" id="computedField1">
		<xp:this.value><![CDATA[#{javascript:var tz = context.getTimeZone();
var dt = @Now()
var localdt:Date = I18n.convertDateFromServerTimeZone(dt,tz)
//return localdt.toString();
return I18n.getServerTimeZone();
}]]></xp:this.value>
	</xp:text>
	<xp:br></xp:br>
	<xp:br></xp:br>
<xp:button value="New Contact - Client Side" id="button4">
				<xp:eventHandler event="onclick" submit="false">
					<xp:this.script><![CDATA[dijit.byId('#{id:djTabContainer1}').createTab()]]></xp:this.script>
				</xp:eventHandler>
			</xp:button>
			<xp:button value="New Contact - Server Side" id="button6">
					<xp:eventHandler event="onclick" submit="true"
						refreshMode="partial" refreshId="tabs">
						<xp:this.action><![CDATA[#{javascript:var arr = new Array();
arr[0] = "one";
arr[1] = "two";
arr[2]= "three";

for(var i=0;i<arr.length;i++){
viewScope.val = arr[i];
getComponent("djTabContainer1").createTab()
}

}]]></xp:this.action>
					</xp:eventHandler>
			</xp:button>
	<xp:panel id="tabs">
		<xe:djTabContainer id="djTabContainer1" tabPosition="top"
			style="width:500px; height:300px; margin:5px;"
			defaultTabContent="doc">
			<xp:this.facets>
				<xe:djTabPane xp:key="doc" id="djTabPane2"
					title="#{javascript:viewScope.val}" closable="true"
					partialEvents="true">
					<xp:panel>
						<xp:this.data>
							<xp:dominoDocument var="document1"
								formName="Contact">
								<xp:this.postOpenDocument><![CDATA[#{javascript:var fn = document1.getItemValueString("FirstName")
var ln = document1.getItemValueString("LastName")
var title = fn + " " + ln
var pane = getComponent("djTabPane2")
pane.setTitle(title)
pane.setTabUniqueKey(document1.getNoteID())
}]]></xp:this.postOpenDocument>
							</xp:dominoDocument>
						</xp:this.data>
						<xp:table>
							<xp:tr>
								<xp:td>
									<xp:label value="First name:"
										id="firstName_Label1" for="firstName1">
									</xp:label>
								</xp:td>
								<xp:td>
									<xp:inputText
										value="#{document1.FirstName}" id="firstName1"
										required="true">
									</xp:inputText>
								</xp:td>
								<xp:td>
									Required field, client
									side&#160;validation
								</xp:td>
							</xp:tr>
							<xp:tr>
								<xp:td>
									<xp:label value="Last name:"
										id="lastName_Label1" for="lastName1">
									</xp:label>
								</xp:td>
								<xp:td>
									<xp:inputText
										value="#{document1.LastName}" id="lastName1" required="true"
										disableClientSideValidation="true">
									</xp:inputText>
								</xp:td>
								<xp:td>
									Required field, server side
									validation
								</xp:td>
							</xp:tr>
							<xp:tr>
								<xp:td>
									<xp:label value="E mail:"
										id="eMail_Label1" for="eMail1">
									</xp:label>
								</xp:td>
								<xp:td>
									<xp:inputText
										value="#{document1.EMail}" id="eMail1">
									</xp:inputText>
								</xp:td>
								<xp:td></xp:td>
							</xp:tr>
							<xp:tr>
								<xp:td>
									<xp:label value="City:"
										id="city_Label1" for="city1">
									</xp:label>
								</xp:td>
								<xp:td>
									<xp:inputText
										value="#{document1.City}" id="city1">
									</xp:inputText>
								</xp:td>
								<xp:td></xp:td>
							</xp:tr>
						</xp:table>
						<xp:messages id="messages1"></xp:messages>
						<xp:br></xp:br>
						<xp:button value="Ok" id="button2">
							<xp:eventHandler event="onclick"
								submit="true">
								<xp:this.action>
									<xp:actionGroup>
										<xp:saveDocument></xp:saveDocument>
										<xp:executeScript>
											<xp:this.script><![CDATA[#{javascript:var c = getComponent("djTabPane2")
c.closeTab('viewRefreshPanel')}]]></xp:this.script>
										</xp:executeScript>
									</xp:actionGroup>
								</xp:this.action>
							</xp:eventHandler>
						</xp:button>
						<xp:button value="Cancel" id="button3">
							<xp:eventHandler event="onclick"
								submit="true" immediate="true">
								<xp:this.action>
									<xp:actionGroup>
										<xp:executeScript>
											<xp:this.script><![CDATA[#{javascript:var c = getComponent("djTabPane2")
c.closeTab()}]]></xp:this.script>
										</xp:executeScript>
									</xp:actionGroup>
								</xp:this.action>
							</xp:eventHandler>
						</xp:button>
					</xp:panel>
				</xe:djTabPane>
			</xp:this.facets>
			<xe:djTabPane id="djTabPane1" title="Home Tab">
				This is the home tab - it is pre-created and cannot be
				closed!
			</xe:djTabPane>
		</xe:djTabContainer>
	</xp:panel>
	</xp:view>
